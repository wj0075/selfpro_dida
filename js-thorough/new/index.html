<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>new的模拟实现</title>
</head>
<body>
<script>
    function Otaku(name, age) {
        this.name = name;
        this.age = age;
        this.habit = 'Games';
    }
    Otaku.prototype.strength = 0;
    Otaku.prototype.sayName  = function () {
        console.log(this.name);
    };

    function objFactory() {
        var obj = new Object(),
            Constructor = [].shift.call(arguments);
            console.log('constructor', Constructor);
            obj.__proto__ = Constructor.prototype;
            console.log('arguments', arguments);
           var ret =  Constructor.apply(obj, arguments);
            return typeof ret === 'object' ? ret : obj
    }
    function objFactory1() {
        var Constructor = [].shift.call(arguments); // 取得外部传入的构造器
        var obj  = Object.create(Constructor.prototype);//从Object.prototype上克隆一个对象
        /*var F = function () {};
        F.prototype = Constructor.prototype;
        obj = new F(); // 指向正确的原型*/
        var ret = Constructor.apply(obj, arguments); // 借用外部传入的构造器给obj设置属性
        return typeof ret === 'object' ? ret || obj : obj; // 确保构造器返回一个对象


    }
    /*var person = objFactory(Otaku, 'wj', 24);
    console.log(person.name);
    console.log(person.age);
    console.log(person.habit);
    console.log(person.strength);
    console.log(person.sayName());*/
    function Otaku1(name, age) {
        this.age = age;
        this.strength = 60;
        /*return {
            name: name,
            habit: 'Games'
        }*/
        return 'wj';
    }
    /*var person = new Otaku1('wj', 24);
    console.log(person.name);
    console.log(person.habit);
    console.log(person.strength);
    console.log(person.age);
    console.log(person);
*/


</script>
</body>
</html>